# SPDX-FileCopyrightText: 2025 Deutsche Telekom AG
#
# SPDX-License-Identifier: Apache-2.0

global:
  labels:
    # Common labels for all resources
    common: {}
    # Monitoring related Labels
    monitoring:
      # General monitoring labels
      general: {}
      # Labels for monitoring specific to Keycloak service
      keycloak: {}
      # Labels for monitoring database services
      database: {}

  # Default registry and namespace for all images
  # Can be overridden per component (e.g., image.registry)
  #
  # Images are constructed as: {registry}/{namespace}/{repository}:{tag}
  image:
    # -- Default registry for all images
    registry: ""
    # -- Default namespace for all images
    namespace: ""

  # -- Array of existing pull secret names to reference for image pulling
  # Secrets must be created outside this chart and exist in the same namespace
  # Example: ["my-registry-secret", "another-secret"]
  imagePullSecrets:

  # -- global default for imagePullPolicy
  imagePullPolicy: IfNotPresent

  database:
    location: local
    # Set host if you use an external database or service name is not sufficient
    host: localhost
    port: 5432
    database: pgdb
    username: pgusr
    password: not_secure_pwd

  failOnUnsetValues: true

# maximum number of client connections
maxConnections: "100"

# memory dedicated to PostgreSQL for caching data
sharedBuffers: "32MB"

# maximum number of transactions that can be in the "prepared" state simultaneously
# setting this parameter to zero (default) disables the prepared-transaction feature
maxPreparedTransactions: "0"

# -- PostgreSQL image configuration (inherits global.image.registry and global.image.namespace)
image:
  # To use official PostgreSQL from Docker Hub, set both registry and namespace to empty:
  registry: ""
  namespace: ""
  repository: postgres
  tag: "16.6"

# -- Image pull policy for PostgreSQL container
imagePullPolicy: IfNotPresent

resources:
  limits:
    cpu: 100m
    memory: 500Mi
  requests:
    cpu: 20m
    memory: 200Mi

persistence:
  keepOnDelete: true
  storageClassName: ""
  resources:
    requests:
      storage: 1Gi
  #mountDir: '/var/lib/postgresql/data'

deployment:
  annotations: {}

podSecurityContext: {}

containerSecurityContext: {}

